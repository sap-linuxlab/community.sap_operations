# See SAP Note for all possible options:
# 2935898 - Install and Configure SAP HANA Backint Agent for Amazon S3

[cloud_storage]
provider = aws
auth = {{ sap_hana_backint_aws_s3_definition['auth'] }}
bucket = {{ sap_hana_backint_aws_s3_definition['bucket'] }}
region = {{ sap_hana_backint_aws_s3_definition['region'] }}
{% if sap_hana_backint_aws_s3_definition['auth'] == 'key' %}
access_key = {{ sap_hana_backint_aws_s3_definition['access_key'] }}
secret_access_key = {{ sap_hana_backint_aws_s3_definition['secret_access_key'] }}
{% endif %}
{% if sap_hana_backint_aws_s3_definition['auth'] == 'role' %}
role_name = {{ sap_hana_backint_aws_s3_definition['role_name'] }}
{% endif %}
# max_concurrency =
# multipart_chunksize =

[trace]
default = {{ sap_hana_backint_aws_s3_definition['trace_default_level'] | d('info') }}
cloudsdk = {{ sap_hana_backint_aws_s3_definition['trace_sdk_level'] | d('warning') }}
destination = tracedirectory
tracedirectory = /usr/sap/{{ __sap_hana_backint_sid }}/HDB{{ __sap_hana_backint_instance_number }}/{{ __sap_hana_backint_setup_hostname }}/trace/

[backint]
compression = {{ sap_hana_backint_aws_s3_definition['compression_type'] | d('zstd') }}
compression_level = {{ sap_hana_backint_aws_s3_definition['compression_level'] | d('1') }}
remove_key_prefix = /usr/sap/{{ __sap_hana_backint_sid }}/SYS/global/hdb/backint/
additional_key_prefix = {{ __sap_hana_backint_setup_hostname }}/{{ __sap_hana_backint_sid }}/
